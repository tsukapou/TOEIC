<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã€Œã•ã‚“ã€ä»˜ããƒ†ã‚¹ãƒˆ</title>
    <link rel="stylesheet" href="css/personalized-dashboard.css">
    <style>
        .test-result {
            background: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin: 1rem auto;
            max-width: 600px;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        }
        .test-case {
            margin-bottom: 1rem;
            padding: 1rem;
            background: #f9fafb;
            border-radius: 0.5rem;
            border-left: 4px solid #3b82f6;
        }
        .test-case h4 {
            margin: 0 0 0.5rem 0;
            color: #1f2937;
        }
        .test-case code {
            background: #e5e7eb;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-family: monospace;
        }
        .result {
            margin-top: 0.5rem;
            padding: 0.5rem;
            border-radius: 0.25rem;
        }
        .result.success {
            background: #d1fae5;
            color: #065f46;
        }
        .result.error {
            background: #fee2e2;
            color: #991b1b;
        }
    </style>
</head>
<body style="background: #f3f4f6; padding: 2rem;">
    <h1 style="text-align: center; color: #1f2937; margin-bottom: 2rem;">ğŸ¯ ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã€Œã•ã‚“ã€ä»˜ããƒ†ã‚¹ãƒˆ</h1>
    
    <!-- ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹çµæœ -->
    <div class="test-result">
        <h3 style="margin-bottom: 1.5rem; color: #1f2937;">ğŸ“‹ ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹</h3>
        
        <div class="test-case">
            <h4>ã‚±ãƒ¼ã‚¹1: ã€Œã•ã‚“ã€ãªã—ã®ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ </h4>
            <p>å…¥åŠ›: <code>nickname: "ãƒ„ã‚«ã‚µ"</code></p>
            <p>æœŸå¾…çµæœ: <code>"ãƒ„ã‚«ã‚µã•ã‚“"</code></p>
            <div id="result1" class="result"></div>
        </div>
        
        <div class="test-case">
            <h4>ã‚±ãƒ¼ã‚¹2: ã€Œã•ã‚“ã€ä»˜ãã®ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ </h4>
            <p>å…¥åŠ›: <code>nickname: "å¤ªéƒã•ã‚“"</code></p>
            <p>æœŸå¾…çµæœ: <code>"å¤ªéƒã•ã‚“"</code> ï¼ˆé‡è¤‡ã—ãªã„ï¼‰</p>
            <div id="result2" class="result"></div>
        </div>
        
        <div class="test-case">
            <h4>ã‚±ãƒ¼ã‚¹3: è‹±èªåã®ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ </h4>
            <p>å…¥åŠ›: <code>nickname: "Tom"</code></p>
            <p>æœŸå¾…çµæœ: <code>"Tomã•ã‚“"</code></p>
            <div id="result3" class="result"></div>
        </div>
        
        <div class="test-case">
            <h4>ã‚±ãƒ¼ã‚¹4: ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ æœªç™»éŒ²</h4>
            <p>å…¥åŠ›: <code>userProfile ãªã—</code></p>
            <p>æœŸå¾…çµæœ: <code>"å­¦ç¿’è€…ã•ã‚“"</code></p>
            <div id="result4" class="result"></div>
        </div>
    </div>
    
    <!-- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
    <div id="personalizedDashboard"></div>
    
    <!-- ã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
    <script src="js/personalized-learning-nav.js"></script>
    <script src="js/personalized-dashboard.js"></script>
    
    <script>
        console.log('=== ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã€Œã•ã‚“ã€ä»˜ããƒ†ã‚¹ãƒˆé–‹å§‹ ===');
        
        function testCase(caseNum, nickname, expected) {
            console.log(`\n--- ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹${caseNum} ---`);
            console.log(`å…¥åŠ›: ${nickname ? `"${nickname}"` : 'ãªã—'}`);
            console.log(`æœŸå¾…: "${expected}"`);
            
            // LocalStorageã‚’ã‚¯ãƒªã‚¢
            localStorage.removeItem('userProfile');
            localStorage.removeItem('personalizedProfile');
            
            // ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã‚’è¨­å®šï¼ˆã‚±ãƒ¼ã‚¹4ä»¥å¤–ï¼‰
            if (nickname) {
                const userProfile = {
                    nickname: nickname,
                    targetScore: 800,
                    purposes: ['è‡ªå·±æˆé•·'],
                    registeredAt: new Date().toISOString()
                };
                localStorage.setItem('userProfile', JSON.stringify(userProfile));
            }
            
            // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’å–å¾—
            const profile = PersonalizedLearningNav.getUserProfile();
            const actual = profile.name;
            
            console.log(`çµæœ: "${actual}"`);
            
            // çµæœåˆ¤å®š
            const success = actual === expected;
            const resultDiv = document.getElementById(`result${caseNum}`);
            
            if (success) {
                console.log('âœ… æˆåŠŸ');
                resultDiv.className = 'result success';
                resultDiv.innerHTML = `âœ… æˆåŠŸ: <code>"${actual}"</code>`;
            } else {
                console.log(`âŒ å¤±æ•—: æœŸå¾…="${expected}", å®Ÿéš›="${actual}"`);
                resultDiv.className = 'result error';
                resultDiv.innerHTML = `âŒ å¤±æ•—: æœŸå¾…=<code>"${expected}"</code>, å®Ÿéš›=<code>"${actual}"</code>`;
            }
            
            return success;
        }
        
        // ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
        window.addEventListener('DOMContentLoaded', () => {
            console.log('DOMContentLoaded - ãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            let allPassed = true;
            
            // ã‚±ãƒ¼ã‚¹1: ã€Œã•ã‚“ã€ãªã—
            allPassed &= testCase(1, "ãƒ„ã‚«ã‚µ", "ãƒ„ã‚«ã‚µã•ã‚“");
            
            // ã‚±ãƒ¼ã‚¹2: ã€Œã•ã‚“ã€ä»˜ã
            allPassed &= testCase(2, "å¤ªéƒã•ã‚“", "å¤ªéƒã•ã‚“");
            
            // ã‚±ãƒ¼ã‚¹3: è‹±èªå
            allPassed &= testCase(3, "Tom", "Tomã•ã‚“");
            
            // ã‚±ãƒ¼ã‚¹4: æœªç™»éŒ²
            allPassed &= testCase(4, null, "å­¦ç¿’è€…ã•ã‚“");
            
            // æœ€çµ‚çµæœ
            console.log('\n=== ãƒ†ã‚¹ãƒˆçµæœ ===');
            if (allPassed) {
                console.log('âœ… å…¨ãƒ†ã‚¹ãƒˆãƒ‘ã‚¹ï¼');
            } else {
                console.log('âŒ ä¸€éƒ¨ãƒ†ã‚¹ãƒˆå¤±æ•—');
            }
            
            // ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’æç”»ï¼ˆã‚±ãƒ¼ã‚¹1ã®ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã§ï¼‰
            localStorage.removeItem('userProfile');
            localStorage.removeItem('personalizedProfile');
            localStorage.setItem('userProfile', JSON.stringify({
                nickname: "ãƒ„ã‚«ã‚µ",
                targetScore: 800
            }));
            
            PersonalizedLearningNav.init();
            PersonalizedDashboard.render();
            
            console.log('\n=== ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æç”»å®Œäº† ===');
            console.log('ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ç¢ºèªã—ã¦ãã ã•ã„: "ãƒ„ã‚«ã‚µã•ã‚“å°‚ç”¨ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰" ã¨è¡¨ç¤ºã•ã‚Œã‚‹ã¯ãš');
        });
    </script>
</body>
</html>
