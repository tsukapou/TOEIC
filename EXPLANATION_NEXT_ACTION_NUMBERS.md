# おすすめの学習カード：数字の変動条件

**日時**: 2025-12-08  
**種別**: システム説明書  

---

## 📊 概要

「おすすめの学習」カードの（）内の数字は、ユーザーの学習状況に応じて**自動的に変動**します。システムが6段階の優先度で、最も重要な学習タスクを判定します。

---

## 🎯 優先度順のアクション

システムは以下の順序で、最も優先度の高いアクションを1つ選択します:

### 1. 🎯 **今日の目標テスト（あと○回）** ← 最優先
- **条件**: 試験日を設定済み && 試験まで60日以内 && 今日の目標未達成
- **数字の意味**: 今日完了すべき残りテスト回数
- **計算式**:
  ```javascript
  試験までの日数 = (試験日 - 今日) / (24時間)
  残り問題数 = 450問 - すでに学習した問題数
  1日あたりの問題数 = 残り問題数 / 試験までの日数
  1日あたりのテスト数 = Math.ceil(1日あたりの問題数 / 30問)
  表示する数字 = 1日あたりのテスト数 - 今日すでに完了したテスト数
  ```
- **例**: 「今日の目標テスト（あと2回）」
  - 試験まで30日、残り300問 → 1日10問 → 1日1テスト必要
  - 今日まだテストしていない → 「あと1回」

---

### 2. 🔥 **緊急の復習（○問）**
- **条件**: 復習期限が過ぎた問題が存在する
- **数字の意味**: 期限切れの復習問題の総数
- **優先度計算**:
  ```javascript
  優先度 = 1000 + (期限切れ日数 × 50) + その他の要素
  ```
- **カテゴリー判定**: 優先度 **1000以上** → 緊急（urgent）
- **変動要因**:
  - 期限切れ日数が増えるほど数字が増加
  - スペースドリピティションで登録した問題の復習期限を過ぎた
  - 記憶定着率が30%未満の問題
  - 忘却リスクが70点以上の問題
- **例**: 「緊急の復習（5問）」
  - 5問の復習期限が過ぎている

---

### 3. ⚠️ **今日の復習（○問）** ← ツカサ様が見た18問はこれ!
- **条件**: 今日が復習期限の問題が存在する
- **数字の意味**: 今日復習すべき問題の総数
- **優先度計算**:
  ```javascript
  優先度 = 500-999 (緊急ほどではないが重要)
  
  要素:
  - 忘却リスク × 5
  - (100 - 記憶定着率) × 3
  - 間違い回数 × 30
  - その他の要素
  ```
- **カテゴリー判定**: 優先度 **500-999** → 重要（important）
- **変動要因**:
  - スペースドリピティションで今日が復習期限の問題
  - 記憶定着率が30-70%の問題
  - 間違い回数が多い問題（3回以上）
  - 最近（1-3日以内）間違えた問題
- **例**: 「今日の復習（18問）」
  - 18問が今日復習すべき期限
  - これらを復習しないと記憶が薄れる

#### 📊 18問の内訳（推測）
ツカサ様の環境では、以下のような問題が含まれていると思われます:
- スペースドリピティションで登録済みの問題で、今日が復習期限
- 過去に間違えた問題で、記憶定着率が50%前後
- 忘却リスクが中程度（40-60点）の問題

---

### 4. 💪 **苦手問題集中特訓（○カテゴリ）**
- **条件**: 正答率50%未満のカテゴリが存在する（かつ3問以上解答済み）
- **数字の意味**: 苦手カテゴリの総数
- **優先度計算**:
  ```javascript
  優先度 = 200 + その他の要素
  ```
- **カテゴリー判定**: 優先度 **500未満** → 推奨（recommended）
- **変動要因**:
  - カテゴリー別の正答率が50%未満
  - 最低3問以上そのカテゴリで解答済み
  - カテゴリー例: 動詞の形、前置詞、代名詞、接続詞、語彙、など
- **例**: 「苦手問題集中特訓（3カテゴリ）」
  - 動詞の形: 正答率40%
  - 前置詞: 正答率30%
  - 接続詞: 正答率45%

---

### 5. 📋 **デイリーミッション（残り○個）**
- **条件**: デイリーミッション未達成 && 一部達成済み
- **数字の意味**: 未達成のミッション数
- **計算式**:
  ```javascript
  表示する数字 = 今日のミッション総数 - 達成済みミッション数
  ```
- **変動要因**:
  - ログインボーナス（達成済み → 残り5個に）
  - テストを1回完了（達成 → 残り4個に）
  - 復習を1回完了（達成 → 残り3個に）
  - ストリークを継続（達成 → 残り2個に）
  - など
- **例**: 「デイリーミッション（残り5個）」
  - 今日のミッション6個中、1個達成済み

---

### 6. 📝 **テストを受ける** ← デフォルト
- **条件**: 上記1-5のいずれも該当しない場合
- **数字**: なし
- **優先度**: 通常（normal）
- **説明**: 新しい問題にチャレンジして実力を伸ばす

---

## 🔢 優先度スコアの計算詳細

### 計算式
```javascript
優先度スコア = 
  + 期限切れボーナス（1000 + 期限切れ日数 × 50）
  + 忘却リスク × 5
  + (100 - 記憶定着率) × 3
  + 間違い回数 × 30
  + 最近の間違いボーナス（1日以内: +100, 3日以内: +50）
  + (5 - 復習レベル) × 20
  + カテゴリ弱点ボーナス（+200）
```

### カテゴリー分類
| カテゴリー | 優先度範囲 | 説明 |
|-----------|-----------|------|
| 🔥 緊急（urgent） | 1000以上 | 期限切れ、超高リスク |
| ⚠️ 重要（important） | 500-999 | 今日が期限、高リスク |
| 💡 推奨（recommended） | 500未満 | 苦手カテゴリ、中リスク |

---

## 📈 数字の変動例

### シナリオ1: 試験日まで30日
```
朝（テスト前）:
→ 「今日の目標テスト（あと1回）」

昼（テスト1回完了後）:
→ 「今日の復習（18問）」  ← 目標達成したので次の優先度へ
```

### シナリオ2: スペースドリピティションで学習中
```
月曜日:
→ 「今日の復習（18問）」  ← 18問が今日の復習期限

火曜日（18問中10問復習完了）:
→ 「今日の復習（8問）」   ← 残り8問が今日の復習期限

水曜日（すべて復習完了、3問が期限切れ）:
→ 「緊急の復習（3問）」   ← 期限切れが最優先に
```

### シナリオ3: 苦手カテゴリの変化
```
初期（カテゴリ学習開始）:
→ 「テストを受ける」  ← まだデータ不足

中期（正答率が判明）:
→ 「苦手問題集中特訓（3カテゴリ）」  ← 動詞40%, 前置詞30%, 接続詞45%

後期（特訓で正答率向上）:
→ 「苦手問題集中特訓（1カテゴリ）」  ← 前置詞30%のみ残存
```

---

## 🎯 ツカサ様の「今日の復習（18問）」について

### 18問が選ばれた理由
以下の条件を満たす問題が18問存在すると推測されます:

1. **スペースドリピティションで登録済み**
   - 過去にテストで間違えた問題
   - 復習スケジュールに登録されている

2. **今日が復習期限**
   - 前回の復習から指定日数が経過
   - 記憶の忘却曲線に基づく最適タイミング

3. **優先度スコアが500-999**
   - 期限切れではない（1000未満）
   - でも重要（500以上）

### 18問を減らす方法
```
方法1: 復習を実行する
→ 復習して正解すれば、次回の復習期限が延びる
→ 「今日の復習（18問）」→「今日の復習（10問）」→「今日の復習（5問）」...

方法2: 復習を繰り返して習熟度を上げる
→ 記憶定着率が高くなれば、優先度が下がる
→ 最終的に「推奨」カテゴリに移動

方法3: 完全マスター
→ 連続で正解を重ねると「完全マスター」状態に
→ 復習リストから除外される
```

---

## 📝 まとめ

### 数字の意味
- **（あと○回）**: 今日完了すべき残りテスト回数（試験日設定時）
- **（○問）**: 復習すべき問題数（緊急/重要）
- **（○カテゴリ）**: 苦手なカテゴリ数
- **（残り○個）**: 未達成のミッション数

### 数字が変動するタイミング
- テストを完了したとき
- 復習を完了したとき
- 日付が変わったとき（復習期限の判定）
- 問題の記憶定着率が変化したとき
- カテゴリ別の正答率が変化したとき

### システムの目的
ユーザーの学習状況を**リアルタイムで分析**し、**最も効果的な学習タスク**を自動的に提案する。

**作成者**: AI Assistant  
**対象**: ツカサ様  
**ステータス**: ✅ 完成
