<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç§˜æ›¸ãƒ‘ãƒãƒ«è‡ªå‹•ã‚ªãƒ¼ãƒ—ãƒ³ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            padding: 2rem;
            background: #f3f4f6;
        }
        .status {
            background: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .status h3 {
            margin: 0 0 0.5rem 0;
            color: #1f2937;
        }
        .status.success {
            border-left: 4px solid #10b981;
        }
        .status.error {
            border-left: 4px solid #ef4444;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª ç§˜æ›¸ãƒ‘ãƒãƒ«è‡ªå‹•ã‚ªãƒ¼ãƒ—ãƒ³ãƒ†ã‚¹ãƒˆ</h1>
    <div id="statusContainer"></div>

    <script src="js/secretary-team.js"></script>
    <script src="js/greeting-team-selector.js"></script>
    <script src="js/secretary-panel.js"></script>
    
    <script>
        const statusContainer = document.getElementById('statusContainer');
        
        function addStatus(title, success, message) {
            const div = document.createElement('div');
            div.className = `status ${success ? 'success' : 'error'}`;
            div.innerHTML = `
                <h3>${success ? 'âœ…' : 'âŒ'} ${title}</h3>
                <p style="margin: 0; color: #6b7280;">${message}</p>
            `;
            statusContainer.appendChild(div);
            console.log(`${success ? 'âœ…' : 'âŒ'} ${title}: ${message}`);
        }
        
        // Test 1: ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«èª­ã¿è¾¼ã¿ç¢ºèª
        setTimeout(() => {
            addStatus(
                'SecretaryTeamåˆæœŸåŒ–',
                typeof SecretaryTeam !== 'undefined',
                typeof SecretaryTeam !== 'undefined' ? 'ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒæ­£å¸¸ã«èª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸ' : 'ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã›ã‚“ã§ã—ãŸ'
            );
            
            addStatus(
                'GreetingTeamSelectoråˆæœŸåŒ–',
                typeof GreetingTeamSelector !== 'undefined',
                typeof GreetingTeamSelector !== 'undefined' ? 'ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒæ­£å¸¸ã«èª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸ' : 'ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã›ã‚“ã§ã—ãŸ'
            );
            
            // Test 2: è§£é™¤æ¸ˆã¿ç§˜æ›¸ç¢ºèª
            if (typeof SecretaryTeam !== 'undefined') {
                const unlocked = SecretaryTeam.getUnlockedSecretaries();
                addStatus(
                    'è§£é™¤æ¸ˆã¿ç§˜æ›¸å–å¾—',
                    unlocked.length > 0,
                    `${unlocked.length}äººã®ç§˜æ›¸ãŒè§£é™¤æ¸ˆã¿ã§ã™: ${unlocked.join(', ')}`
                );
                
                // Test 3: ç§˜æ›¸ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå¤‰æ›ç¢ºèª
                const secretaryObjects = unlocked.map(id => {
                    const sec = SecretaryTeam.secretaries[id];
                    return sec ? {id: sec.id, name: sec.name} : null;
                }).filter(s => s !== null);
                
                addStatus(
                    'ç§˜æ›¸ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå¤‰æ›',
                    secretaryObjects.length === unlocked.length,
                    `${secretaryObjects.length}äººã®ç§˜æ›¸æƒ…å ±ã‚’å–å¾—: ${secretaryObjects.map(s => s.name).join(', ')}`
                );
                
                console.log('ğŸ“Š ç§˜æ›¸ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè©³ç´°:', secretaryObjects);
            }
            
            // Test 4: ã‚°ãƒªãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒãƒ¼ãƒ ç¢ºèª
            if (typeof GreetingTeamSelector !== 'undefined') {
                const team = GreetingTeamSelector.getGreetingTeam();
                addStatus(
                    'ã‚°ãƒªãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒãƒ¼ãƒ å–å¾—',
                    true,
                    `ç¾åœ¨${team.length}äººãŒé¸æŠã•ã‚Œã¦ã„ã¾ã™: ${team.length > 0 ? team.join(', ') : 'æœªé¸æŠ'}`
                );
            }
            
            // Test 5: ç§˜æ›¸ãƒ‘ãƒãƒ«ã‚’è‡ªå‹•ã‚ªãƒ¼ãƒ—ãƒ³
            setTimeout(() => {
                if (typeof showSecretaryPanel === 'function') {
                    console.log('ğŸš€ ç§˜æ›¸ãƒ‘ãƒãƒ«ã‚’é–‹ãã¾ã™...');
                    addStatus(
                        'ç§˜æ›¸ãƒ‘ãƒãƒ«è¡¨ç¤º',
                        true,
                        'ç§˜æ›¸ãƒ‘ãƒãƒ«ã‚’è‡ªå‹•çš„ã«é–‹ãã¾ã—ãŸ'
                    );
                    
                    try {
                        showSecretaryPanel();
                        
                        // ãƒ‘ãƒãƒ«ãŒé–‹ã„ãŸã“ã¨ã‚’ç¢ºèª
                        setTimeout(() => {
                            const modal = document.getElementById('secretaryPanelModal');
                            addStatus(
                                'ç§˜æ›¸ãƒ‘ãƒãƒ«HTMLç”Ÿæˆ',
                                modal !== null,
                                modal ? 'ãƒ‘ãƒãƒ«ãŒæ­£å¸¸ã«è¡¨ç¤ºã•ã‚Œã¾ã—ãŸ' : 'ãƒ‘ãƒãƒ«ãŒè¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ'
                            );
                            
                            if (modal) {
                                // æŒ¨æ‹¶æ‹…å½“ã‚¿ãƒ–ã‚’è‡ªå‹•çš„ã«é–‹ã
                                setTimeout(() => {
                                    console.log('ğŸŒ… æŒ¨æ‹¶æ‹…å½“ã‚¿ãƒ–ã‚’é–‹ãã¾ã™...');
                                    if (typeof showSecretaryPanelTab === 'function') {
                                        showSecretaryPanelTab('greeting');
                                        
                                        setTimeout(() => {
                                            const greetingContent = document.getElementById('panelContent-greeting');
                                            addStatus(
                                                'æŒ¨æ‹¶æ‹…å½“ã‚¿ãƒ–è¡¨ç¤º',
                                                greetingContent && greetingContent.style.display === 'block',
                                                greetingContent ? 'æŒ¨æ‹¶æ‹…å½“ã‚¿ãƒ–ãŒæ­£å¸¸ã«è¡¨ç¤ºã•ã‚Œã¾ã—ãŸ' : 'æŒ¨æ‹¶æ‹…å½“ã‚¿ãƒ–ãŒè¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ'
                                            );
                                            
                                            if (greetingContent) {
                                                console.log('ğŸ“‹ æŒ¨æ‹¶æ‹…å½“ã‚¿ãƒ–ã®HTML:', greetingContent.innerHTML.substring(0, 500) + '...');
                                            }
                                        }, 500);
                                    }
                                }, 1000);
                            }
                        }, 500);
                    } catch (error) {
                        console.error('âŒ ã‚¨ãƒ©ãƒ¼:', error);
                        addStatus(
                            'ç§˜æ›¸ãƒ‘ãƒãƒ«è¡¨ç¤º',
                            false,
                            `ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ${error.message}`
                        );
                    }
                } else {
                    addStatus(
                        'ç§˜æ›¸ãƒ‘ãƒãƒ«è¡¨ç¤º',
                        false,
                        'showSecretaryPanelé–¢æ•°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“'
                    );
                }
            }, 1000);
            
        }, 500);
    </script>
</body>
</html>
