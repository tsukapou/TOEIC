# 🧪 オンボーディングテストガイド

**テストページ**: `test-onboarding-full.html`  
**作成日**: 2025-12-09  
**目的**: オンボーディング全4ステップの完全テスト

---

## 🚀 クイックスタート

### 1. テストページを開く

```
test-onboarding-full.html をブラウザで開く
```

### 2. テストを開始

**右上のコントロールパネル**から好きなステップを選択：

```
📍 ステップ操作
├─ [Step 1から開始] ← ようこそ画面
├─ [Step 2から開始] ← レベル診断テスト
├─ [Step 3から開始] ← おすすめプラン
└─ [Step 4から開始] ← 秘書の部屋への誘導 ⭐ NEW!
```

---

## 🎯 Step 4テスト手順（重要）

### ステップ1: Step 4を表示

```
コントロールパネル
  ↓
[Step 4から開始] ボタンをクリック
  ↓
オンボーディング画面が表示される
```

### ステップ2: UI確認

**確認項目チェックリスト**:

```
□ 🏢 アイコンが表示されている
□ 「秘書の部屋へようこそ！」タイトル
□ 「23人の個性豊かな秘書」という文言
□ プレビュー機能3項目が表示:
  □ 👥 23人の秘書キャラクター
  □ 💬 時間帯別グリーティング
  □ 🎁 実績解除で新秘書登場
□ 黄色のCTAボックスが表示（💡 最初は3人...）
□ 「秘書の部屋へ 🚀」ボタンが表示
□ 「後で選ぶ」ボタンが表示
```

### ステップ3: ボタン動作確認

#### ボタン1: 「秘書の部屋へ 🚀」

```
クリック
  ↓
【確認】左下のテストログに以下が表示される:
  ✅ 「秘書の部屋へ 🚀」ボタンがクリックされました
  ✅ goToSecretaryRoom() 実行中...
  ✅ showSecretaryRoom() が呼び出されました
  ✅ 秘書の部屋へ画面遷移（モック）
  ↓
【確認】モック「秘書の部屋」画面が表示される
  ↓
【確認】トースト通知が表示される
  「秘書の部屋へようこそ！お気に入りの秘書を選びましょう 🏢」
```

#### ボタン2: 「後で選ぶ」

```
クリック
  ↓
【確認】左下のテストログに以下が表示される:
  ✅ 「後で選ぶ」ボタンがクリックされました
  ✅ skipSecretarySelection() 実行中...
  ✅ ホーム画面へ遷移（完了）
  ↓
【確認】オンボーディング画面がフェードアウト
```

---

## 🎛️ コントロールパネル機能

### 📍 ステップ操作

| ボタン | 説明 | 用途 |
|--------|------|------|
| **Step 1から開始** | ようこそ画面を表示 | 完全フローテスト |
| **Step 2から開始** | レベル診断テストを表示 | 診断機能テスト |
| **Step 3から開始** | おすすめプランを表示 | 推奨機能テスト |
| **Step 4から開始** | 秘書の部屋への誘導を表示 | **改良版のテスト** ⭐ |

### 🔄 リセット操作

| ボタン | 説明 | 用途 |
|--------|------|------|
| **オンボーディングをリセット** | 画面を閉じて完了フラグを削除 | 再テスト準備 |
| **全データ削除** | localStorage を完全クリア | 初回訪問状態に戻す |

### 📊 現在の状態

リアルタイムで以下を表示：

- **完了フラグ**: 完了済み / 未完了
- **現在のステップ**: Step 1 〜 Step 4

---

## 📝 テストログ

**左下の黒いパネル**にリアルタイムでログが表示されます。

### ログの種類

| 色 | 種類 | 意味 |
|----|------|------|
| 🔵 青 | info | 情報メッセージ |
| 🟢 緑 | success | 成功メッセージ |
| 🟡 黄 | warning | 警告メッセージ |
| 🔴 赤 | error | エラーメッセージ |

### ログ例

```
[14:30:15] 🚀 Step 4から開始...
[14:30:15] ✅ Step 4（秘書の部屋への誘導）を表示
[14:30:15] 📝 確認項目:
[14:30:15]   • 🏢 アイコン
[14:30:15]   • 「秘書の部屋へようこそ！」タイトル
[14:30:15]   • 「23人の個性豊かな秘書」文言
[14:30:18] 🖱️ 「秘書の部屋へ 🚀」ボタンがクリックされました
[14:30:18] 🔄 goToSecretaryRoom() 実行中...
[14:30:18] 🏢 showSecretaryRoom() が呼び出されました
[14:30:18] ✅ 秘書の部屋へ画面遷移（モック）
```

---

## 🧪 テストシナリオ

### シナリオ1: Step 4の完全テスト（推奨）

```
1. [Step 4から開始] をクリック
2. UI確認チェックリストをすべて確認
3. 「秘書の部屋へ 🚀」ボタンをクリック
4. モック画面が表示されることを確認
5. トースト通知が表示されることを確認
6. [オンボーディングをリセット] をクリック
7. もう一度 [Step 4から開始] をクリック
8. 「後で選ぶ」ボタンをクリック
9. オンボーディングが完了することを確認
```

**所要時間**: 約3分

---

### シナリオ2: 完全フローテスト

```
1. [全データ削除] をクリック
2. [Step 1から開始] をクリック
3. 「始める 🚀」ボタンをクリック
4. レベル診断（5問）に回答
5. おすすめプランを確認
6. 「次へ進む →」をクリック
7. Step 4（秘書の部屋への誘導）を確認
8. 「秘書の部屋へ 🚀」をクリック
9. モック画面が表示されることを確認
```

**所要時間**: 約5分

---

### シナリオ3: 連続テスト（品質保証）

```
【準備】
[全データ削除] をクリック

【テスト1】
[Step 4から開始] → 「秘書の部屋へ」クリック → 確認

【テスト2】
[オンボーディングをリセット]
[Step 4から開始] → 「後で選ぶ」クリック → 確認

【テスト3】
[オンボーディングをリセット]
[Step 1から開始] → 完全フロー実行 → 確認

【テスト4】
[オンボーディングをリセット]
[Step 2から開始] → Step 2〜4 実行 → 確認
```

**所要時間**: 約10分

---

## 🎨 UI確認ポイント

### Step 4画面の構成

```
┌─────────────────────────────────────┐
│ ステップ 4 / 4              [スキップ] │
├─────────────────────────────────────┤
│                                     │
│              🏢                      │
│   秘書の部屋へようこそ！             │
│                                     │
│ あなたの学習をサポートする           │
│ 23人の個性豊かな秘書があなたを       │
│ 待っています！                       │
│                                     │
│ ┌─────────────────────────────┐   │
│ │ 👥 23人の秘書キャラクター    │   │
│ │    それぞれ個性的な性格      │   │
│ └─────────────────────────────┘   │
│                                     │
│ ┌─────────────────────────────┐   │
│ │ 💬 時間帯別グリーティング    │   │
│ │    朝・昼・夕・夜で変わる    │   │
│ └─────────────────────────────┘   │
│                                     │
│ ┌─────────────────────────────┐   │
│ │ 🎁 実績解除で新秘書登場      │   │
│ │    学習を続けて全員アンロック│   │
│ └─────────────────────────────┘   │
│                                     │
│ ┌─────────────────────────────┐   │
│ │💡 最初は3人の秘書が利用可能  │   │
│ │   学習を進めるとさらに多くの │   │
│ │   秘書が登場します！         │   │
│ └─────────────────────────────┘   │
│                                     │
├─────────────────────────────────────┤
│      [秘書の部屋へ 🚀]               │
│      [後で選ぶ]                      │
└─────────────────────────────────────┘
```

### 色彩確認

| 要素 | 色 | 用途 |
|------|-----|------|
| **プレビュー背景** | `#f8fafc` | 淡いグレー |
| **プレビュー左ボーダー** | `#3b82f6` | 青 |
| **CTAボックス背景** | `#fef3c7` → `#fde68a` | 黄色グラデーション |
| **CTAボックスボーダー** | `#fbbf24` | オレンジ黄色 |
| **「秘書の部屋へ」ボタン** | `#3b82f6` → `#8b5cf6` | 青→紫グラデーション |

---

## ✅ 合格基準

### 必須項目（すべて✅）

```
□ Step 4が正しく表示される
□ 🏢 アイコンが表示される
□ 「秘書の部屋へようこそ！」タイトルが表示される
□ 「23人の個性豊かな秘書」文言が表示される
□ プレビュー3項目が表示される
□ 黄色のCTAボックスが表示される
□ 「秘書の部屋へ 🚀」ボタンが動作する
□ 「後で選ぶ」ボタンが動作する
□ showSecretaryRoom() が呼び出される
□ トースト通知が表示される
□ エラーが発生しない
```

---

## 🐛 トラブルシューティング

### Q1: Step 4が表示されない

**解決策**:
1. [全データ削除] をクリック
2. ページをリロード
3. もう一度 [Step 4から開始] をクリック

---

### Q2: ボタンをクリックしても何も起こらない

**確認**:
1. ブラウザのコンソールを開く（F12）
2. エラーメッセージがないか確認
3. `OnboardingSystem` が読み込まれているか確認
   ```javascript
   console.log(window.OnboardingSystem);
   ```

---

### Q3: モック画面が表示されない

**原因**: `showSecretaryRoom()` 関数が見つからない

**解決策**:
- テストページでは自動的にモック関数が定義されます
- 実際のアプリでは `app.js` で定義する必要があります

---

## 📊 テスト結果の記録

### テンプレート

```
【テスト日時】2025-12-09 14:30

【テスト項目】
✅ Step 4表示
✅ UI確認（全項目）
✅ 「秘書の部屋へ」ボタン動作
✅ 「後で選ぶ」ボタン動作
✅ トースト通知表示
✅ エラーなし

【総合評価】合格 ✅

【備考】
- すべての項目が期待通りに動作
- UI/UXも良好
- リリース準備完了
```

---

## 🎯 次のステップ

### テスト完了後

1. ✅ テスト結果を記録
2. ✅ バグがあれば修正
3. ✅ `index.html` で実際の動作を確認
4. ✅ ユーザーテスト実施
5. ✅ 本番リリース

---

**テストページ**: `test-onboarding-full.html`  
**ステータス**: 🎉 **テスト準備完了**

ツカサさん、このテストページで完全にオンボーディングをテストできます！🧪✨
