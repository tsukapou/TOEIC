<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>é–¢æ•°ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body {
            font-family: sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-item {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .status {
            padding: 5px 15px;
            border-radius: 5px;
            font-weight: bold;
        }
        .ok {
            background: #d4edda;
            color: #155724;
        }
        .ng {
            background: #f8d7da;
            color: #721c24;
        }
        button {
            padding: 10px 20px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <h1>ğŸ” ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°ãƒ†ã‚¹ãƒˆ</h1>
    <button onclick="checkAllFunctions()">ã™ã¹ã¦ã®é–¢æ•°ã‚’ãƒã‚§ãƒƒã‚¯</button>
    
    <div id="results"></div>
    
    <h2>ğŸ§ª å®Ÿéš›ã«ãƒœã‚¿ãƒ³ã‚’ãƒ†ã‚¹ãƒˆ</h2>
    <button onclick="testStartTest()">startTest(1) ã‚’å®Ÿè¡Œ</button>
    <button onclick="testShowHome()">showHome() ã‚’å®Ÿè¡Œ</button>
    
    <div id="testResults" style="margin-top: 20px; padding: 15px; background: white; border-radius: 8px;"></div>
    
    <script src="js/lazy-loader.js"></script>
    
    <script>
        function checkAllFunctions() {
            const functions = [
                'startTest', 'nextQuestion', 'previousQuestion', 'showHome',
                'showScreen', 'renderQuestion', 'startTimer', 'stopTimer',
                'updateTimer', 'selectAnswer', 'showExplanation',
                'updateNavigationButtons', 'renderOptions',
                'startUnifiedReview', 'finishTest', 'executeNextAction',
                'updateGrowthDashboard'
            ];
            
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<h2>æ¤œè¨¼çµæœ</h2>';
            
            let okCount = 0;
            let ngCount = 0;
            
            functions.forEach(funcName => {
                const isAvailable = typeof window[funcName] === 'function';
                const item = document.createElement('div');
                item.className = 'test-item';
                item.innerHTML = `
                    <span>${funcName}</span>
                    <span class="status ${isAvailable ? 'ok' : 'ng'}">${isAvailable ? 'âœ… OK' : 'âŒ NG'}</span>
                `;
                resultsDiv.appendChild(item);
                
                if (isAvailable) {
                    okCount++;
                } else {
                    ngCount++;
                }
            });
            
            const summary = document.createElement('div');
            summary.style.cssText = 'margin-top: 20px; padding: 20px; background: ' + (ngCount === 0 ? '#d4edda' : '#fff3cd') + '; border-radius: 8px; font-size: 18px; font-weight: bold;';
            summary.textContent = `çµæœ: ${okCount}/${functions.length}å€‹ã®é–¢æ•°ãŒåˆ©ç”¨å¯èƒ½ ${ngCount > 0 ? 'âš ï¸ ' + ngCount + 'å€‹ã®é–¢æ•°ãŒæœªå®šç¾©' : 'âœ… ã™ã¹ã¦æ­£å¸¸'}`;
            resultsDiv.appendChild(summary);
        }
        
        function testStartTest() {
            const results = document.getElementById('testResults');
            try {
                if (typeof window.startTest === 'function') {
                    results.innerHTML = '<p style="color: green;">âœ… startTesté–¢æ•°ã¯å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ï¼</p><p>â€»å®Ÿéš›ã«ã¯å•é¡Œãƒ‡ãƒ¼ã‚¿ãŒãªã„ã®ã§å®Ÿè¡Œã¯ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã™</p>';
                } else {
                    results.innerHTML = '<p style="color: red;">âŒ startTesté–¢æ•°ãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã›ã‚“ï¼</p>';
                }
            } catch (e) {
                results.innerHTML = '<p style="color: red;">âŒ ã‚¨ãƒ©ãƒ¼: ' + e.message + '</p>';
            }
        }
        
        function testShowHome() {
            const results = document.getElementById('testResults');
            try {
                if (typeof window.showHome === 'function') {
                    results.innerHTML = '<p style="color: green;">âœ… showHomeé–¢æ•°ã¯å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ï¼</p><p>â€»å®Ÿéš›ã«ã¯ç”»é¢ãŒãªã„ã®ã§å®Ÿè¡Œã¯ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã™</p>';
                } else {
                    results.innerHTML = '<p style="color: red;">âŒ showHomeé–¢æ•°ãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã›ã‚“ï¼</p>';
                }
            } catch (e) {
                results.innerHTML = '<p style="color: red;">âŒ ã‚¨ãƒ©ãƒ¼: ' + e.message + '</p>';
            }
        }
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«è‡ªå‹•ãƒã‚§ãƒƒã‚¯
        window.addEventListener('load', function() {
            setTimeout(checkAllFunctions, 3000); // 3ç§’å¾Œã«ãƒã‚§ãƒƒã‚¯ï¼ˆLazy Loaderå®Œäº†å¾Œï¼‰
        });
    </script>
</body>
</html>
