# 📅 毎日の3人評価会話システム

## 概要

ログイン時から**3人の秘書全員が同時に登場**し、あなたの学習状況を分析して**個性豊かな評価コメント**をしてくれるシステムです。

---

## 🎯 主な特徴

### 1. **ログイン時から3人全員登場**
- 起動時に自動的に3人全員（🌸さくら、💼レイナ、🎀ユイ）が登場
- 1日1回のみ表示（既に表示済みの日は通常挨拶）
- 秘書を切り替える必要なし！

### 2. **学習状況の自動分析**
システムが以下の項目を自動的に分析：
- ✅ **連続学習日数** - 何日連続で学習しているか
- ✅ **今日の学習状況** - 今日既に学習したか
- ✅ **昨日の学習状況** - 昨日学習していたか
- ✅ **スコア推移** - 上昇中/下降中/安定
- ✅ **平均正答率** - これまでの平均スコア
- ✅ **総学習日数** - トータルで何日学習したか
- ✅ **完了テスト数** - 完了したテスト数

### 3. **状況別メッセージ**
分析結果に基づいて、以下の状況に応じたメッセージを表示：

#### 🎉 初回訪問時
- さくら：優しく歓迎
- レイナ：厳しく挑戦状
- ユイ：元気に歓迎

#### 🔥 連続学習中（3日以上）
- 3日連続～6日連続
- 7日以上連続
- 各秘書が個性的に称賛・激励

#### 📊 今日既に学習済み
##### スコア上昇中
- さくら：喜んで称賛
- レイナ：認めつつ更なる向上を要求
- ユイ：大喜びで応援

##### スコア下降中
- さくら：優しく励まし
- レイナ：厳しく叱咤
- ユイ：心配しながら慰め

##### スコア安定
- さくら：安定を評価
- レイナ：更なる高みを要求
- ユイ：元気に応援

#### 📆 昨日学習したが今日はまだ
- さくら：優しく今日も頑張ろうと促す
- レイナ：継続の重要性を説く
- ユイ：一緒にやろうと誘う

#### 💤 しばらく学習していない
- さくら：温かく再開を歓迎
- レイナ：ブランクを叱り、奮起を促す
- ユイ：久しぶりを喜び、再スタートを応援

---

## 🎭 会話連動表情システム

会話内容や評価に応じて、**3人の秘書の表情が自動的に変化**します！

### さくら（優しいサポート型）の表情
| 表情 | 使用場面 |
|------|---------|
| 😊 normal | 通常・笑顔 |
| 😄 happy | 嬉しい・スコアアップ |
| 💪 encouraging | 応援・励まし |
| 🤗 caring | 優しい・思いやり・スコアダウン時 |
| 🤔 thinking | 考え中・アドバイス |
| 🎉 celebration | お祝い・7日以上連続達成 |

### レイナ（厳格・ストイック型）の表情
| 表情 | 使用場面 |
|------|---------|
| 😐 normal | 通常・クール |
| 😤 strict | 厳しい・ストイック・スコアダウン時 |
| 😌 satisfied | 満足・認める・7日以上連続達成 |
| 💼 professional | プロフェッショナル・初回 |
| 🤔 thinking | 考え中・分析 |
| 💪 demanding | 要求・挑戦・昨日学習済み |

### ユイ（妹系・元気型）の表情
| 表情 | 使用場面 |
|------|---------|
| 😊 normal | 通常・明るい笑顔 |
| 😆 excited | 興奮・わくわく・初回 |
| 😄 cheerful | 元気・楽しい・連続学習中 |
| 💪 supporting | 応援・サポート・昨日学習済み |
| 🎉 celebration | お祝い・やった！・7日以上連続達成 |
| 🤗 caring | 優しい・心配・スコアダウン時 |

---

## 💬 メッセージパターン数

**合計100+パターン以上**の個性豊かな評価コメント！

### パターン内訳
- **連続学習中メッセージ**: 各秘書15パターン（計45パターン）
- **今日学習済みメッセージ**: 各秘書24パターン（計72パターン）
  - スコア上昇時: 各8パターン
  - スコア下降時: 各8パターン
  - スコア安定時: 各8パターン
- **昨日学習済みメッセージ**: 各秘書5パターン（計15パターン）
- **長期不在メッセージ**: 各秘書6パターン（計18パターン）
- **デフォルトメッセージ**: 各秘書8パターン（計24パターン）

**合計: 174パターン！**

---

## 🌸 各秘書の個性

### さくら（優しいサポート型）
- **性格**: 優しく、励まし上手
- **評価スタイル**: ポジティブ、寄り添う、バランス重視
- **特徴的なセリフ**:
  - 「素晴らしい！」
  - 「一緒に頑張りましょう✨」
  - 「あなたなら必ず目標達成できますよ😊」
  - 「大丈夫！こういう日もあります💦」

### レイナ（厳格・ストイック型）
- **性格**: 厳しく、ストイック、結果重視
- **評価スタイル**: 叱咤激励、高い基準を要求、成長を促す
- **特徴的なセリフ**:
  - 「甘いわね💼」
  - 「この程度で満足するな」
  - 「まだまだ伸びしろはあるわよ」
  - 「気を引き締めなさい💼」

### ユイ（妹系・元気型）
- **性格**: 元気で明るい、親しみやすい
- **評価スタイル**: 無邪気に応援、感情表現豊か、一緒に頑張る
- **特徴的なセリフ**:
  - 「わーい！🎉」
  - 「お兄ちゃん/お姉ちゃんすごい！」
  - 「ユイも負けないよ！💪」
  - 「一緒に頑張ろうね🎀✨」

---

## 📊 学習状況評価ロジック

### 連続学習日数の計算
- 今日または昨日まで学習している場合のみカウント
- 1日でも空くとリセット
- 最新の日付から逆算して連続日数を算出

### スコア推移（トレンド）の判定
#### 上昇トレンド（up）
- 今日と昨日のスコアを比較し、5%以上向上
- または、最近3回と以前の平均を比較し、5%以上向上

#### 下降トレンド（down）
- 今日と昨日のスコアを比較し、5%以上低下
- または、最近3回と以前の平均を比較し、5%以上低下

#### 安定トレンド（flat）
- 上昇でも下降でもない状態

---

## 🎯 表示タイミング

### 自動表示条件
- アプリ起動時（ホーム画面表示時）
- 1日1回のみ（同じ日に2回目以降は通常挨拶）
- 最終表示日をlocalStorageに保存

### 手動表示
通常は自動表示されますが、以下の方法で手動表示も可能：
```javascript
// ブラウザのコンソールで実行
SecretaryDaily.showDailyConversation();
```

---

## 🛠️ 技術仕様

### 使用ファイル
- **js/secretary-daily.js** - メインロジック
- **css/secretary-daily.css** - スタイル定義
- **js/secretary-expressions.js** - 表情管理システム

### データ保存
- **localStorage** - 最終表示日を記録
- キー: `toeic_last_daily_display`
- フォーマット: `YYYY-MM-DD`

### アニメーション
- **秘書登場**: 順次表示アニメーション（200msずつ遅延）
- **メッセージ表示**: 順次表示アニメーション（300msずつ遅延）
- **表情変化**: フェードトランジション（0.5s）
- **閉じるアニメーション**: フェードアウト（0.3s）

---

## 🎨 UI/UX設計

### レイアウト
```
┌────────────────────────────────────┐
│  📅 今日の学習状況チェック          │
│  2025年12月7日（土）               │
├────────────────────────────────────┤
│  🌸さくら   💼レイナ   🎀ユイ     │
│  (表情画像) (表情画像) (表情画像)  │
├────────────────────────────────────┤
│  🌸 さくらのコメント                │
│  「素晴らしい！3日連続...」         │
├────────────────────────────────────┤
│  💼 レイナのコメント                │
│  「3日連続か...悪くないわね...」    │
├────────────────────────────────────┤
│  🎀 ユイのコメント                  │
│  「わー！3日連続だよ！...」         │
├────────────────────────────────────┤
│  📊 学習統計                        │
│  🔥連続学習: 3日                    │
│  📊平均正答率: 85%                  │
│  📈トレンド: 上昇中！               │
│  📅総学習日数: 10日                 │
├────────────────────────────────────┤
│     [今日も頑張ります！💪]          │
└────────────────────────────────────┘
```

### カラーリング
- **さくら**: ピンク系（#ec4899）
- **レイナ**: パープル系（#8b5cf6）
- **ユイ**: オレンジ系（#f59e0b）

---

## 🚀 今後の拡張予定

- [ ] 週次サマリー機能
- [ ] 月次レポート機能
- [ ] 目標設定と達成状況の通知
- [ ] カスタムメッセージ追加機能
- [ ] 音声読み上げ機能
- [ ] SNSシェア機能

---

## 📝 メッセージ例

### 🔥 連続学習3日目 - さくら
> 「素晴らしい！3日連続で学習していますね✨ あなたの継続力、本当に尊敬します！この調子で頑張りましょう！」

### 🔥 連続学習3日目 - レイナ
> 「3日連続か…悪くないわね💼 でもまだ満足するには早いわよ。この調子を維持しつつ、更なる高みを目指しなさい」

### 🔥 連続学習3日目 - ユイ
> 「わー！3日連続だよ！！🎉 お兄ちゃん/お姉ちゃんすごすぎる！ユイ、もう感動しちゃう😭💕」

---

## 🎊 まとめ

この**毎日の3人評価会話システム**は、学習のモチベーション維持に特化した機能です。

✨ **3人の秘書が毎日あなたを評価**  
✨ **100+パターンの個性的なコメント**  
✨ **会話に連動した表情変化**  
✨ **学習状況の自動分析**  

毎日ログインするのが楽しみになる、そんなシステムを目指しました！💪✨
